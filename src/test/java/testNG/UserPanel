package TestNG;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

import io.github.bonigarcia.wdm.WebDriverManager;

public class UserPanel {
	WebDriver driver;

	@BeforeTest
	public void InitialiseBrowser() {
		WebDriverManager.chromedriver().setup();
		driver = new ChromeDriver();
		driver.manage().window().maximize();

	}

	@AfterTest
	public void Teardown() {

		driver.quit();
	}

	@Test
	public void homepage() throws Exception {
		driver.get("https://sms-userpanel.netlify.app/");
		Thread.sleep(2000);
	}

	@Test
	public void LoginPage() throws Exception {
		driver.findElement(By.xpath("//button[normalize-space()='Login']")).click();
		Thread.sleep(3000);
		driver.findElement(By.xpath("//input[@id='phone'='Enter Phone number']")).sendKeys("9865251799");
		driver.findElement(By.xpath("//button[@type='submit']")).click();
		Thread.sleep(3000);
		driver.get("https://sms-userpanel.netlify.app/verify-otp");
		String otpText = driver.findElement(By.xpath("//*[@id='root']/div[1]/div/main/div/div/div/form/div/div[1]/p"))
				.getText();
		Thread.sleep(3000);

		String otp = otpText.replaceAll("\\D+", ""); // keep only digits
		System.out.println("Fetched OTP: " + otp);

		// Enter each digit into OTP input boxes
		for (int i = 0; i < otp.length(); i++) {
			driver.findElement(
					By.xpath("//*[@id='root']/div[1]/div/main/div/div/div/form/div/div[2]/input[" + (i + 1) + "]"))
					.sendKeys(String.valueOf(otp.charAt(i)));
			Thread.sleep(5000);
		}
		driver.findElement(By.xpath("//button[normalize-space()='Verify OTP']")).click();
		Thread.sleep(5000);
		driver.findElement(By.xpath("//button[@class='focus:outline-none']")).click();
		Thread.sleep(3000);
		driver.findElement(By.xpath("//button[normalize-space()='Logout']")).click();
		Thread.sleep(5000);

	}

	@Test
	public void location() throws Exception {
		driver.findElement(By.xpath("//span[normalize-space()='Chennai']")).click();
		Thread.sleep(2000);
	}

	@Test
	public void notifications() throws Exception {
		driver.findElement(By.xpath("//button[@aria-label='Notifications']")).click();
		Thread.sleep(2000);
	}

	@Test
	public void services() throws Exception {
		driver.findElement(By.xpath("//a[normalize-space()='Services']")).click();
		Thread.sleep(2000);
	}

	@Test
	public void spareparts() throws Exception {
		driver.findElement(By.xpath("//a[normalize-space()='Spare Parts']")).click();
		Thread.sleep(2000);
	}

	@Test
	public void BookingCart() throws Exception {
		driver.findElement(By.xpath("//a[normalize-space()='Booking Cart']")).click();
		Thread.sleep(2000);
	}

	@Test
	public void Booking() throws Exception {
		driver.findElement(By.xpath("//a[normalize-space()='Bookings']")).click();
		Thread.sleep(2000);
		driver.findElement(By.xpath("//button[normalize-space()='Spare Parts']")).click();
		Thread.sleep(3000);
		driver.findElement(By.xpath("//button[normalize-space()='Services']")).click();
		Thread.sleep(3000);
	}

	@Test
	public void Offers() throws Exception {
		driver.findElement(By.xpath("//a[normalize-space()='Offers']")).click();
		Thread.sleep(2000);
	}

	@Test
	public void Enquiry() throws Exception {
		driver.findElement(By.xpath("//button[normalize-space()='Enquiry']")).click();
		Thread.sleep(2000);
	}
}
